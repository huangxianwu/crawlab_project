# ðŸš€ TikTok Shop çˆ¬è™«é¡¹ç›®

ä¸€ä¸ªå®Œæ•´çš„TikTok Shopå•†å“çˆ¬è™«ç³»ç»Ÿï¼Œæ”¯æŒæ™ºèƒ½æ»‘å—éªŒè¯å¤„ç†ã€åæ£€æµ‹æŽªæ–½å’ŒCrawlabå¹³å°éƒ¨ç½²ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ðŸ” æ™ºèƒ½æ»‘å—éªŒè¯å¤„ç†
- åŸºäºŽ **ddddocr** çš„å›¾åƒè¯†åˆ«æŠ€æœ¯
- è‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†TikTok Shopæ»‘å—éªŒè¯
- äººå·¥è½¨è¿¹æ¨¡æ‹Ÿï¼Œæé«˜æˆåŠŸçŽ‡

### ðŸ›¡ï¸ åæ£€æµ‹æŽªæ–½
- éšæœºå»¶æ—¶ï¼ˆ2-5ç§’å¯é…ç½®ï¼‰
- User-Agentè½®æ¢ï¼ˆ7ä¸ªçœŸå®žæµè§ˆå™¨æ ‡è¯†ï¼‰
- è¯·æ±‚é—´éš”æŽ§åˆ¶
- æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶

### ðŸ’¾ å®Œæ•´æ•°æ®å­˜å‚¨
- MongoDBæ•°æ®åº“é›†æˆ
- ç»“æž„åŒ–å•†å“æ•°æ®å­˜å‚¨
- ç»Ÿè®¡åˆ†æžåŠŸèƒ½
- æ‰¹é‡æ•°æ®å¤„ç†

### ðŸ³ Crawlabå¹³å°æ”¯æŒ
- å®Œæ•´çš„Crawlabé…ç½®
- å‚æ•°åŒ–è¿è¡Œæ”¯æŒ
- DockerçŽ¯å¢ƒé€‚é…
- Webç•Œé¢ç®¡ç†

## ðŸ“ é¡¹ç›®ç»“æž„

```
crawler-project/
â”œâ”€â”€ ðŸš€ æ ¸å¿ƒè¿è¡Œæ–‡ä»¶
â”‚   â”œâ”€â”€ crawlab_fixed_runner.py     # ä¿®å¤ç‰ˆçˆ¬è™«ï¼ˆæŽ¨èç”¨äºŽCrawlabï¼‰
â”‚   â”œâ”€â”€ run_complete_crawler.py     # å®Œæ•´ç‰ˆçˆ¬è™«ï¼ˆåŠŸèƒ½ä¸°å¯Œï¼‰
â”‚   â”œâ”€â”€ crawlab_runner.py           # Crawlabå¯åŠ¨å™¨
â”‚   â””â”€â”€ crawlab_simple_runner.py    # ç®€åŒ–ç‰ˆçˆ¬è™«
â”‚
â”œâ”€â”€ ðŸ”§ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ spider.json                 # Crawlabçˆ¬è™«é…ç½®
â”‚   â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”‚   â””â”€â”€ config.py                   # åŸºç¡€é…ç½®
â”‚
â”œâ”€â”€ ðŸ“¦ æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ handlers/                   # å¤„ç†å™¨æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ slider.py              # æ»‘å—å¤„ç†
â”‚   â”‚   â””â”€â”€ extractor.py           # æ•°æ®æå–
â”‚   â”œâ”€â”€ utils/                     # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.py            # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ logger.py              # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ anti_detection.py      # åæ£€æµ‹æŽªæ–½
â”‚   â””â”€â”€ models/                    # æ•°æ®æ¨¡åž‹
â”‚       â””â”€â”€ product.py             # å•†å“æ•°æ®ç»“æž„
â”‚
â”œâ”€â”€ ðŸ“š æ–‡æ¡£å’Œæµ‹è¯•
â”‚   â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜Ž
â”‚   â”œâ”€â”€ CRAWLAB_DEPLOYMENT.md      # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ CRAWLAB_CHECKLIST.md       # éƒ¨ç½²æ£€æŸ¥æ¸…å•
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md         # é¡¹ç›®æ€»ç»“
â”‚   â””â”€â”€ test_crawlab_env.py        # çŽ¯å¢ƒæµ‹è¯•è„šæœ¬
â”‚
â””â”€â”€ ðŸ§ª ç¤ºä¾‹å’Œæµ‹è¯•
    â”œâ”€â”€ demo_successful_crawler.py  # æˆåŠŸæ¡ˆä¾‹æ¼”ç¤º
    â”œâ”€â”€ run_crawler_test.py         # æµ‹è¯•è„šæœ¬
    â””â”€â”€ check_collected_products.py # æ•°æ®æ£€æŸ¥å·¥å…·
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘çŽ¯å¢ƒ

1. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

2. **è¿è¡Œå®Œæ•´ç‰ˆçˆ¬è™«**
   ```bash
   python run_complete_crawler.py
   ```

3. **æŸ¥çœ‹é‡‡é›†ç»“æžœ**
   ```bash
   python check_collected_products.py
   ```

### Crawlabéƒ¨ç½²

1. **ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°Crawlab**

2. **é…ç½®çˆ¬è™«å‚æ•°**
   ```json
   {
     "keywords": "phone case,data cable",
     "max_pages": 1,
     "headless": true
   }
   ```

3. **è¿è¡ŒçŽ¯å¢ƒæµ‹è¯•**
   ```bash
   python test_crawlab_env.py
   ```

4. **å¯åŠ¨çˆ¬è™«**
   ```bash
   python crawlab_fixed_runner.py
   ```

## ðŸ”§ é…ç½®è¯´æ˜Ž

### çŽ¯å¢ƒå˜é‡
```bash
# MongoDBé…ç½®
CRAWLAB_MONGO_HOST=mongo
CRAWLAB_MONGO_PORT=27017
CRAWLAB_MONGO_DB=crawlab_test

# æµè§ˆå™¨é…ç½®
CHROME_BIN=/usr/bin/google-chrome
DISPLAY=:99

# è¿è¡Œå‚æ•°
keywords=phone case
max_pages=1
headless=true
```

### ä¾èµ–è¦æ±‚
- Python 3.8+
- DrissionPage >= 4.1.0
- ddddocr >= 1.4.7
- pymongo >= 4.6.0
- opencv-python-headless >= 4.8.0

## ðŸ“Š åŠŸèƒ½æ¼”ç¤º

### æ»‘å—éªŒè¯å¤„ç†
```
ðŸ§© æ£€æµ‹åˆ°éªŒè¯ç ï¼Œæ­£åœ¨å¤„ç†...
ðŸŽ¯ è¯†åˆ«åˆ°æ»‘å—ä½ç½®: 342
ðŸ“ è®¡ç®—çš„å®žé™…æ»‘åŠ¨è·ç¦»: 203.65
âœ… éªŒè¯ç å¤„ç†æˆåŠŸ
```

### æ•°æ®é‡‡é›†ç»“æžœ
```
ðŸŽŠ çˆ¬è™«è¿è¡Œå®Œæˆï¼
âœ… å¤„ç†å…³é”®è¯: 2 ä¸ª
âœ… é‡‡é›†å•†å“: 15 ä¸ª
âœ… æ•°æ®åº“æ€»å•†å“: 456 æ¡
```

### æ•°æ®åº“å­˜å‚¨æ ¼å¼
```json
{
  "_id": "...",
  "product_id": "123456",
  "title": "iPhone 14 Phone Case",
  "keyword": "phone case",
  "scraped_at": "2025-01-31T10:00:00Z",
  "slider_encountered": true,
  "slider_solved": true,
  "source": "tiktok_shop"
}
```

## ðŸ› æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **OpenGLåº“ç¼ºå¤±**
   ```bash
   apt-get install -y libgl1-mesa-glx libglib2.0-0
   ```

2. **æ¨¡å—å¯¼å…¥å¤±è´¥**
   - ä½¿ç”¨ `crawlab_fixed_runner.py`ï¼ˆæŽ¨èï¼‰
   - æ£€æŸ¥æ–‡ä»¶ä¸Šä¼ å®Œæ•´æ€§

3. **æ»‘å—å¤„ç†å¤±è´¥**
   - æ£€æŸ¥ddddocrå®‰è£…çŠ¶æ€
   - è°ƒæ•´æ‹–æ‹½è·ç¦»è®¡ç®—å‚æ•°

4. **æ•°æ®åº“è¿žæŽ¥å¤±è´¥**
   - éªŒè¯MongoDBæœåŠ¡çŠ¶æ€
   - æ£€æŸ¥è¿žæŽ¥å­—ç¬¦ä¸²æ ¼å¼

## ðŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **é‡‡é›†æ•ˆçŽ‡**: å¹³å‡26ç§’/å…³é”®è¯
- **æ»‘å—å¤„ç†**: å¹³å‡3-5ç§’è¯†åˆ«å’Œå¤„ç†
- **æˆåŠŸçŽ‡**: >80%ï¼ˆæ­£å¸¸ç½‘ç»œçŽ¯å¢ƒï¼‰
- **å†…å­˜ä½¿ç”¨**: <500MB
- **CPUä½¿ç”¨**: <50%

## ðŸ”® æ‰©å±•åŠŸèƒ½

### å·²å®žçŽ°
- âœ… æ™ºèƒ½æ»‘å—éªŒè¯å¤„ç†
- âœ… åæ£€æµ‹æŽªæ–½
- âœ… æ•°æ®å­˜å‚¨å’Œç»Ÿè®¡
- âœ… Crawlabå¹³å°é›†æˆ

### è®¡åˆ’ä¸­
- [ ] ä»£ç†IPæ± é›†æˆ
- [ ] å¤šç”µå•†å¹³å°æ”¯æŒ
- [ ] å®žæ—¶ç›‘æŽ§é¢æ¿
- [ ] æ•°æ®åˆ†æžå’Œå¯è§†åŒ–
- [ ] APIæŽ¥å£æœåŠ¡

## ðŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³ç½‘ç«™çš„robots.txtå’ŒæœåŠ¡æ¡æ¬¾ã€‚

## ðŸ¤ è´¡çŒ®

æ¬¢è¿Žæäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—](CRAWLAB_DEPLOYMENT.md)
2. è¿è¡Œ [çŽ¯å¢ƒæµ‹è¯•è„šæœ¬](test_crawlab_env.py)
3. æ£€æŸ¥ [æ•…éšœæŽ’é™¤æ¸…å•](CRAWLAB_CHECKLIST.md)

---

**â­ å¦‚æžœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**